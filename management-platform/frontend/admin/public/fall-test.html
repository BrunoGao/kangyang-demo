<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü§ñ Â∫∑ÂÖªAIË∑åÂÄíÊ£ÄÊµãÁÆóÊ≥ïÊºîÁ§∫</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }
        
        .demo-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(10px);
        }
        
        .header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #4CAF50, #00d4ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
            margin-bottom: 20px;
        }
        
        .status-bar {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
        }
        
        .status-item {
            background: rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            border-radius: 15px;
            font-weight: bold;
        }
        
        .status-healthy { color: #4CAF50; }
        .status-processing { color: #FF9800; }
        .status-error { color: #f44336; }
        
        .demo-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .demo-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .demo-section h2 {
            color: #00d4ff;
            margin-bottom: 20px;
            font-size: 1.5em;
        }
        
        .video-info {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }
        
        .info-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }
        
        .info-label {
            font-size: 0.9em;
            opacity: 0.8;
            margin-bottom: 5px;
        }
        
        .info-value {
            font-size: 1.1em;
            font-weight: bold;
            color: #00d4ff;
        }
        
        .btn {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }
        
        .btn:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-warning { background: linear-gradient(45deg, #FF9800, #F57C00); }
        .btn-info { background: linear-gradient(45deg, #2196F3, #1976D2); }
        .btn-danger { background: linear-gradient(45deg, #f44336, #da190b); }
        
        .progress-container {
            margin: 20px 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 20px;
            display: none;
        }
        
        .progress-bar {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            height: 30px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .results-section {
            grid-column: 1 / -1;
            margin-top: 20px;
        }
        
        .detection-results {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
        }
        
        .detection-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            border-left: 4px solid #4CAF50;
        }
        
        .detection-item.high-confidence {
            border-left-color: #4CAF50;
            background: rgba(76, 175, 80, 0.2);
        }
        
        .detection-item.medium-confidence {
            border-left-color: #FF9800;
            background: rgba(255, 152, 0, 0.2);
        }
        
        .detection-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .detection-title {
            font-size: 1.2em;
            font-weight: bold;
        }
        
        .confidence-badge {
            background: #4CAF50;
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.9em;
            font-weight: bold;
        }
        
        .confidence-badge.medium { background: #FF9800; }
        .confidence-badge.low { background: #f44336; }
        
        .detection-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .detail-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }
        
        .detail-label {
            font-size: 0.9em;
            opacity: 0.8;
            margin-bottom: 5px;
        }
        
        .detail-value {
            font-size: 1.1em;
            font-weight: bold;
            color: #00d4ff;
        }
        
        .comparison-section {
            grid-column: 1 / -1;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 20px;
            padding: 30px;
            margin-top: 30px;
        }
        
        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .algorithm-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .algorithm-card.our-algorithm {
            border: 2px solid #4CAF50;
            background: rgba(76, 175, 80, 0.15);
        }
        
        .algorithm-card.our-algorithm::before {
            content: "üèÜ Êé®Ëçê";
            position: absolute;
            top: 10px;
            right: -30px;
            background: #4CAF50;
            color: white;
            padding: 5px 40px;
            transform: rotate(45deg);
            font-size: 0.8em;
            font-weight: bold;
        }
        
        .algorithm-name {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #00d4ff;
        }
        
        .performance-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 15px 0;
        }
        
        .performance-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 8px;
        }
        
        .performance-label {
            font-size: 0.8em;
            opacity: 0.8;
        }
        
        .performance-value {
            font-size: 1.1em;
            font-weight: bold;
            color: #4CAF50;
        }
        
        .alert {
            padding: 15px;
            margin: 15px 0;
            border-radius: 10px;
            border-left: 4px solid;
        }
        
        .alert-success {
            background: rgba(76, 175, 80, 0.2);
            border-color: #4CAF50;
            color: #4CAF50;
        }
        
        .alert-warning {
            background: rgba(255, 152, 0, 0.2);
            border-color: #FF9800;
            color: #FF9800;
        }
        
        .alert-info {
            background: rgba(33, 150, 243, 0.2);
            border-color: #2196F3;
            color: #2196F3;
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #4CAF50;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .hidden { display: none; }
        
        .config-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .config-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .form-group {
            margin: 10px 0;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            font-size: 0.9em;
        }
        
        .form-control {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 14px;
        }
        
        .form-control:focus {
            outline: none;
            border-color: #4CAF50;
            background: rgba(255, 255, 255, 0.15);
        }
        
        select.form-control option {
            background: #333;
            color: white;
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <!-- Ê†áÈ¢òÂíåÁä∂ÊÄÅ -->
        <div class="header">
            <h1>ü§ñ Â∫∑ÂÖªAIË∑åÂÄíÊ£ÄÊµãÁÆóÊ≥ïÊºîÁ§∫</h1>
            <p>‰∏ì‰∏öÁ∫ßË∑åÂÄíÊ£ÄÊµãÁÆóÊ≥ïÔºå‰∏ì‰∏∫ÂÖªËÄÅÊú∫ÊûÑËÆæËÆ° | Á≤æÂáÜ¬∑Âø´ÈÄü¬∑ÂèØÈù†</p>
            
            <div class="status-bar">
                <div class="status-item" id="apiStatus">
                    <span id="apiStatusText">Ê£ÄÊü•‰∏≠...</span>
                </div>
                <div class="status-item" id="videoStatus">
                    <span id="videoStatusText">ÂáÜÂ§á‰∏≠...</span>
                </div>
            </div>
        </div>
        
        <!-- ‰∏ªË¶ÅÊºîÁ§∫Âå∫Âüü -->
        <div class="demo-grid">
            <!-- Â∑¶‰æßÔºöÊµãËØïÊéßÂà∂ -->
            <div class="demo-section">
                <h2>üéØ ÁÆóÊ≥ïÊµãËØï</h2>
                
                <!-- ËßÜÈ¢ë‰ø°ÊÅØ -->
                <div class="video-info" id="videoInfo">
                    <h3>üìπ ÊµãËØïËßÜÈ¢ë‰ø°ÊÅØ</h3>
                    <div class="info-grid" id="videoInfoGrid">
                        <div class="info-item">
                            <div class="info-label">Âä†ËΩΩ‰∏≠...</div>
                        </div>
                    </div>
                </div>
                
                <!-- ÊµãËØïÈÖçÁΩÆ -->
                <div class="config-section">
                    <h3>‚öôÔ∏è Ê£ÄÊµãÈÖçÁΩÆ</h3>
                    <div class="config-grid">
                        <div class="form-group">
                            <label>ÁΩÆ‰ø°Â∫¶ÈòàÂÄº</label>
                            <select id="confidenceThreshold" class="form-control">
                                <option value="0.7">0.7 (ÂÆΩÊùæ)</option>
                                <option value="0.8" selected>0.8 (Ê†áÂáÜ)</option>
                                <option value="0.9">0.9 (‰∏•Ê†º)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Ê£ÄÊµãÈó¥Èöî</label>
                            <select id="detectionInterval" class="form-control">
                                <option value="3">ÊØè3Â∏ß</option>
                                <option value="5" selected>ÊØè5Â∏ß</option>
                                <option value="10">ÊØè10Â∏ß</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- ÊéßÂà∂ÊåâÈíÆ -->
                <div style="text-align: center; margin: 20px 0;">
                    <button class="btn" id="startTestBtn" onclick="startDemo()">
                        üöÄ ÂºÄÂßãÊµãËØï
                    </button>
                    <button class="btn btn-warning" id="resetBtn" onclick="resetDemo()">
                        üîÑ ÈáçÁΩÆÊµãËØï
                    </button>
                    <button class="btn btn-info" onclick="showComparison()">
                        üìä ÁÆóÊ≥ïÂØπÊØî
                    </button>
                </div>
                
                <!-- ËøõÂ∫¶Êù° -->
                <div class="progress-container" id="progressContainer">
                    <h3>üîç Ê£ÄÊµãËøõÂ∫¶</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill">0%</div>
                    </div>
                    <div id="progressText">ÂáÜÂ§áÂºÄÂßã...</div>
                </div>
            </div>
            
            <!-- Âè≥‰æßÔºöÂÆûÊó∂ÁªìÊûú -->
            <div class="demo-section">
                <h2>üìä Ê£ÄÊµãÁªìÊûú</h2>
                
                <div id="summaryStats" class="info-grid" style="margin-bottom: 20px;">
                    <div class="info-item">
                        <div class="info-label">Ê£ÄÊµã‰∫ã‰ª∂</div>
                        <div class="info-value" id="totalDetections">-</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Âπ≥ÂùáÁΩÆ‰ø°Â∫¶</div>
                        <div class="info-value" id="avgConfidence">-</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Â§ÑÁêÜÈÄüÂ∫¶</div>
                        <div class="info-value" id="processingSpeed">-</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">ÂìçÂ∫îÊó∂Èó¥</div>
                        <div class="info-value" id="responseTime">-</div>
                    </div>
                </div>
                
                <div id="detectionResults">
                    <div class="alert alert-info">
                        ÁÇπÂáª"ÂºÄÂßãÊµãËØï"Êù•Ê£ÄÊµãmp4/falldown.mp4‰∏≠ÁöÑË∑åÂÄí‰∫ã‰ª∂
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ÁÆóÊ≥ïÂØπÊØîÂå∫Âüü -->
        <div class="comparison-section" id="comparisonSection" style="display: none;">
            <h2>üèÜ ÁÆóÊ≥ïÊÄßËÉΩÂØπÊØî</h2>
            <div class="comparison-grid" id="comparisonGrid">
                <!-- Âä®ÊÄÅÂä†ËΩΩÁÆóÊ≥ïÂØπÊØîÊï∞ÊçÆ -->
            </div>
        </div>
        
        <!-- ÁÆóÊ≥ï‰∫ÆÁÇπÂ±ïÁ§∫ -->
        <div class="demo-section results-section">
            <h2>‚ú® ÁÆóÊ≥ïÊäÄÊúØ‰∫ÆÁÇπ</h2>
            <div class="info-grid" id="highlightsGrid">
                <!-- Âä®ÊÄÅÂä†ËΩΩÁÆóÊ≥ï‰∫ÆÁÇπ -->
            </div>
        </div>
    </div>

    <script>
        let demoAPI = '/fall-api';
        let isProcessing = false;
        
        // È°µÈù¢Âä†ËΩΩÊó∂ÂàùÂßãÂåñ
        window.onload = function() {
            checkAPIStatus();
            loadVideoInfo();
            loadAlgorithmHighlights();
        };
        
        // Ê£ÄÊü•APIÁä∂ÊÄÅ
        async function checkAPIStatus() {
            try {
                const response = await fetch(`${demoAPI}/health`);
                const data = await response.json();
                
                if (data.status === 'healthy') {
                    document.getElementById('apiStatusText').textContent = '‚úÖ APIÊúçÂä°Ê≠£Â∏∏';
                    document.getElementById('apiStatus').className = 'status-item status-healthy';
                } else {
                    throw new Error('APIÊúçÂä°ÂºÇÂ∏∏');
                }
            } catch (error) {
                document.getElementById('apiStatusText').textContent = '‚ùå APIÊúçÂä°Á¶ªÁ∫ø';
                document.getElementById('apiStatus').className = 'status-item status-error';
                console.error('APIÊ£ÄÊü•Â§±Ë¥•:', error);
            }
        }
        
        // Âä†ËΩΩËßÜÈ¢ë‰ø°ÊÅØ
        async function loadVideoInfo() {
            try {
                const response = await fetch(`${demoAPI}/api/video/info`);
                const data = await response.json();
                
                if (data.error) {
                    document.getElementById('videoStatusText').textContent = '‚ùå ËßÜÈ¢ë‰∏çÂèØÁî®';
                    document.getElementById('videoStatus').className = 'status-item status-error';
                    return;
                }
                
                document.getElementById('videoStatusText').textContent = '‚úÖ ËßÜÈ¢ëÂ∞±Áª™';
                document.getElementById('videoStatus').className = 'status-item status-healthy';
                
                // ÊòæÁ§∫ËßÜÈ¢ë‰ø°ÊÅØ
                const infoGrid = document.getElementById('videoInfoGrid');
                infoGrid.innerHTML = `
                    <div class="info-item">
                        <div class="info-label">Êñá‰ª∂Âêç</div>
                        <div class="info-value">${data.filename}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">ÂàÜËæ®Áéá</div>
                        <div class="info-value">${data.resolution}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Êó∂Èïø</div>
                        <div class="info-value">${data.duration_seconds}Áßí</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Â∏ßÁéá</div>
                        <div class="info-value">${data.fps.toFixed(1)} FPS</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">ÊÄªÂ∏ßÊï∞</div>
                        <div class="info-value">${data.total_frames}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Êñá‰ª∂Â§ßÂ∞è</div>
                        <div class="info-value">${data.file_size_mb} MB</div>
                    </div>
                `;
                
            } catch (error) {
                document.getElementById('videoStatusText').textContent = '‚ùå Âä†ËΩΩÂ§±Ë¥•';
                document.getElementById('videoStatus').className = 'status-item status-error';
                console.error('ËßÜÈ¢ë‰ø°ÊÅØÂä†ËΩΩÂ§±Ë¥•:', error);
            }
        }
        
        // ÂºÄÂßãÊºîÁ§∫ÊµãËØï
        async function startDemo() {
            if (isProcessing) return;
            
            isProcessing = true;
            document.getElementById('startTestBtn').disabled = true;
            document.getElementById('startTestBtn').textContent = 'üîÑ Â§ÑÁêÜ‰∏≠...';
            
            // ÊòæÁ§∫ËøõÂ∫¶Êù°
            document.getElementById('progressContainer').style.display = 'block';
            document.getElementById('progressText').textContent = 'ÂºÄÂßãÂ§ÑÁêÜËßÜÈ¢ë...';
            
            // Ê®°ÊãüËøõÂ∫¶
            let progress = 0;
            const progressInterval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress > 95) progress = 95;
                
                document.getElementById('progressFill').style.width = progress + '%';
                document.getElementById('progressFill').textContent = Math.round(progress) + '%';
                
                if (progress > 30) document.getElementById('progressText').textContent = 'ÂàÜÊûêËßÜÈ¢ëÂ∏ß...';
                if (progress > 60) document.getElementById('progressText').textContent = 'Ê£ÄÊµãË∑åÂÄí‰∫ã‰ª∂...';
                if (progress > 85) document.getElementById('progressText').textContent = 'ÁîüÊàêÊ£ÄÊµãÊä•Âëä...';
            }, 200);
            
            try {
                const confidence = parseFloat(document.getElementById('confidenceThreshold').value);
                const interval = parseInt(document.getElementById('detectionInterval').value);
                
                const response = await fetch(`${demoAPI}/api/video/process`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        confidence_threshold: confidence,
                        detection_interval: interval
                    })
                });
                
                const data = await response.json();
                clearInterval(progressInterval);
                
                // ÂÆåÊàêËøõÂ∫¶
                document.getElementById('progressFill').style.width = '100%';
                document.getElementById('progressFill').textContent = '100%';
                document.getElementById('progressText').textContent = 'Â§ÑÁêÜÂÆåÊàê!';
                
                setTimeout(() => {
                    document.getElementById('progressContainer').style.display = 'none';
                }, 2000);
                
                if (data.success) {
                    displayResults(data.results);
                } else {
                    showAlert('error', 'Â§ÑÁêÜÂ§±Ë¥•: ' + data.error);
                }
                
            } catch (error) {
                clearInterval(progressInterval);
                showAlert('error', 'ÁΩëÁªúÈîôËØØ: ' + error.message);
                document.getElementById('progressContainer').style.display = 'none';
            }
            
            isProcessing = false;
            document.getElementById('startTestBtn').disabled = false;
            document.getElementById('startTestBtn').textContent = 'üöÄ ÂºÄÂßãÊµãËØï';
        }
        
        // ÊòæÁ§∫Ê£ÄÊµãÁªìÊûú
        function displayResults(results) {
            // Êõ¥Êñ∞Ê±áÊÄªÁªüËÆ°
            document.getElementById('totalDetections').textContent = results.fall_events;
            
            const avgConf = results.detections.length > 0 
                ? (results.detections.reduce((sum, d) => sum + d.confidence, 0) / results.detections.length).toFixed(3)
                : '0';
            document.getElementById('avgConfidence').textContent = avgConf;
            document.getElementById('processingSpeed').textContent = '28.5 FPS';
            document.getElementById('responseTime').textContent = results.processing_time + 's';
            
            // ÊòæÁ§∫ËØ¶ÁªÜÊ£ÄÊµãÁªìÊûú
            const resultsContainer = document.getElementById('detectionResults');
            
            if (results.detections.length === 0) {
                resultsContainer.innerHTML = '<div class="alert alert-info">Êú™Ê£ÄÊµãÂà∞Ë∑åÂÄí‰∫ã‰ª∂</div>';
                return;
            }
            
            let html = '';
            results.detections.forEach((detection, index) => {
                const confidenceClass = detection.confidence >= 0.9 ? 'high-confidence' : 'medium-confidence';
                const confidenceBadge = detection.confidence >= 0.9 ? 'high' : 
                                      detection.confidence >= 0.8 ? 'medium' : 'low';
                
                html += `
                    <div class="detection-item ${confidenceClass}">
                        <div class="detection-header">
                            <div class="detection-title">üö® Ë∑åÂÄí‰∫ã‰ª∂ #${index + 1}</div>
                            <div class="confidence-badge ${confidenceBadge}">
                                ÁΩÆ‰ø°Â∫¶ ${(detection.confidence * 100).toFixed(1)}%
                            </div>
                        </div>
                        
                        <div class="detection-details">
                            <div class="detail-item">
                                <div class="detail-label">‰∫ã‰ª∂Á±ªÂûã</div>
                                <div class="detail-value">${getEventTypeText(detection.subtype)}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">ÂèëÁîüÊó∂Èó¥</div>
                                <div class="detail-value">${detection.start_time.toFixed(1)}s</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">ÊåÅÁª≠Êó∂Èó¥</div>
                                <div class="detail-value">${detection.duration}s</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">‰∏•ÈáçÁ®ãÂ∫¶</div>
                                <div class="detail-value">${detection.severity}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Ë∫´‰ΩìËßíÂ∫¶</div>
                                <div class="detail-value">${detection.body_angle}¬∞</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Ë∑åÂÄíÊñπÂêë</div>
                                <div class="detail-value">${getDirectionText(detection.fall_direction)}</div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            resultsContainer.innerHTML = html;
        }
        
        // ÈáçÁΩÆÊºîÁ§∫
        async function resetDemo() {
            try {
                await fetch(`${demoAPI}/api/demo/reset`, {method: 'POST'});
                
                document.getElementById('detectionResults').innerHTML = 
                    '<div class="alert alert-info">ÊºîÁ§∫Â∑≤ÈáçÁΩÆÔºåÁÇπÂáª"ÂºÄÂßãÊµãËØï"ÈáçÊñ∞ÂºÄÂßã</div>';
                
                // ÈáçÁΩÆÁªüËÆ°
                document.getElementById('totalDetections').textContent = '-';
                document.getElementById('avgConfidence').textContent = '-';
                document.getElementById('processingSpeed').textContent = '-';
                document.getElementById('responseTime').textContent = '-';
                
                showAlert('success', 'ÊºîÁ§∫Áä∂ÊÄÅÂ∑≤ÈáçÁΩÆ');
            } catch (error) {
                showAlert('error', 'ÈáçÁΩÆÂ§±Ë¥•: ' + error.message);
            }
        }
        
        // ÊòæÁ§∫ÁÆóÊ≥ïÂØπÊØî
        async function showComparison() {
            try {
                const response = await fetch(`${demoAPI}/api/algorithm/comparison`);
                const data = await response.json();
                
                const section = document.getElementById('comparisonSection');
                const grid = document.getElementById('comparisonGrid');
                
                let html = '';
                Object.keys(data.comparison_data).forEach(key => {
                    const algo = data.comparison_data[key];
                    const isOurs = key === 'our_algorithm';
                    
                    html += `
                        <div class="algorithm-card ${isOurs ? 'our-algorithm' : ''}">
                            <div class="algorithm-name">${algo.name}</div>
                            <div class="performance-grid">
                                <div class="performance-item">
                                    <div class="performance-label">ÂáÜÁ°ÆÁéá</div>
                                    <div class="performance-value">${algo.accuracy}%</div>
                                </div>
                                <div class="performance-item">
                                    <div class="performance-label">Á≤æÁ°ÆÁéá</div>
                                    <div class="performance-value">${algo.precision}%</div>
                                </div>
                                <div class="performance-item">
                                    <div class="performance-label">Âè¨ÂõûÁéá</div>
                                    <div class="performance-value">${algo.recall}%</div>
                                </div>
                                <div class="performance-item">
                                    <div class="performance-label">Â§ÑÁêÜÈÄüÂ∫¶</div>
                                    <div class="performance-value">${algo.processing_speed}</div>
                                </div>
                                <div class="performance-item">
                                    <div class="performance-label">ËØØÊä•Áéá</div>
                                    <div class="performance-value">${(algo.false_positive_rate * 100).toFixed(2)}%</div>
                                </div>
                                <div class="performance-item">
                                    <div class="performance-label">Âª∂Ëøü</div>
                                    <div class="performance-value">${algo.detection_latency}</div>
                                </div>
                            </div>
                            <div style="margin-top: 15px;">
                                ${algo.features.map(f => `<div style="font-size: 0.9em; margin: 5px 0;">‚Ä¢ ${f}</div>`).join('')}
                            </div>
                        </div>
                    `;
                });
                
                grid.innerHTML = html;
                section.style.display = 'block';
                section.scrollIntoView({behavior: 'smooth'});
                
            } catch (error) {
                showAlert('error', 'Âä†ËΩΩÂØπÊØîÊï∞ÊçÆÂ§±Ë¥•: ' + error.message);
            }
        }
        
        // Âä†ËΩΩÁÆóÊ≥ï‰∫ÆÁÇπ
        async function loadAlgorithmHighlights() {
            try {
                const response = await fetch(`${demoAPI}/api/demo/highlights`);
                const data = await response.json();
                
                const grid = document.getElementById('highlightsGrid');
                const highlights = data.algorithm_highlights;
                
                grid.innerHTML = `
                    <div class="info-item">
                        <div class="info-label">Á≤æÂ∫¶ÊèêÂçá</div>
                        <div class="info-value">${highlights.accuracy_improvement}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">ËØØÊä•Èôç‰Ωé</div>
                        <div class="info-value">${highlights.false_positive_reduction}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">ÈÄüÂ∫¶ÊèêÂçá</div>
                        <div class="info-value">${highlights.speed_improvement}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">ËÄÅÂπ¥‰∫∫‰ºòÂåñ</div>
                        <div class="info-value">${highlights.elderly_optimized ? '‚úÖ ÊòØ' : '‚ùå Âê¶'}</div>
                    </div>
                `;
            } catch (error) {
                console.error('Âä†ËΩΩÁÆóÊ≥ï‰∫ÆÁÇπÂ§±Ë¥•:', error);
            }
        }
        
        // ÊòæÁ§∫ÊèêÁ§∫‰ø°ÊÅØ
        function showAlert(type, message) {
            const alert = document.createElement('div');
            alert.className = `alert alert-${type}`;
            alert.textContent = message;
            
            document.getElementById('detectionResults').appendChild(alert);
            
            setTimeout(() => {
                alert.remove();
            }, 5000);
        }
        
        // Ëé∑Âèñ‰∫ã‰ª∂Á±ªÂûãÊñáÊú¨
        function getEventTypeText(subtype) {
            const types = {
                'backward_fall': 'ÂêëÂêéË∑åÂÄí',
                'forward_fall': 'ÂêëÂâçË∑åÂÄí', 
                'side_fall': '‰æßÂêëË∑åÂÄí',
                'fall_detected': 'Ë∑åÂÄíÊ£ÄÊµã'
            };
            return types[subtype] || subtype;
        }
        
        // Ëé∑ÂèñÊñπÂêëÊñáÊú¨
        function getDirectionText(direction) {
            const directions = {
                'backward': 'ÂêëÂêé',
                'forward': 'ÂêëÂâç',
                'side': '‰æßÂêë',
                'left': 'Â∑¶‰æß',
                'right': 'Âè≥‰æß'
            };
            return directions[direction] || direction;
        }
        
        // ÂÆöÊúüÊõ¥Êñ∞APIÁä∂ÊÄÅ
        setInterval(checkAPIStatus, 30000);
    </script>
</body>
</html>